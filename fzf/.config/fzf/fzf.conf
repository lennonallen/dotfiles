# FZF Configuration for popup-like appearance

# Core options for popup window effect
export FZF_DEFAULT_OPTS="
  --height=50%
  --reverse
  --border=rounded
  --margin=1
  --padding=1
  --prompt='❯ '
  --pointer='▶'
  --marker='✓'
  --ansi
  --cycle
  --bind='ctrl-u:preview-page-up,ctrl-d:preview-page-down'
  --bind='ctrl-/:toggle-preview'
  --bind='alt-up:preview-up,alt-down:preview-down'
  --preview-window='right:50%:wrap'
  --color='fg:#eceff4,bg:#2e3440,hl:#88c0d0'
  --color='fg+:#eceff4,bg+:#434c5e,hl+:#88c0d0'
  --color='info:#5e81ac,prompt:#88c0d0,pointer:#d08770'
  --color='marker:#a3be8c,spinner:#d08770,header:#5e81ac'
  --color='border:#434c5e'
"

# Alternative full-screen popup (comment out above and uncomment below if preferred)
# export FZF_DEFAULT_OPTS="
#   --height=100%
#   --border=rounded
#   --margin=2,4
#   --padding=1,2
#   --prompt='❯ '
#   --pointer='▶'
#   --marker='✓'
#   --ansi
#   --cycle
#   --preview-window='right:50%:wrap'
#   --color='fg:#eceff4,bg:#2e3440,hl:#88c0d0'
#   --color='fg+:#eceff4,bg+:#434c5e,hl+:#88c0d0'
#   --color='info:#5e81ac,prompt:#88c0d0,pointer:#d08770'
#   --color='marker:#a3be8c,spinner:#d08770,header:#5e81ac'
#   --color='border:#434c5e'
# "

# Search options
export FZF_DEFAULT_COMMAND='find . -type f -not -path "*/\.*"'
export FZF_CTRL_T_COMMAND="$FZF_DEFAULT_COMMAND"

# Completion options
export FZF_COMPLETION_OPTS='--border --info=inline'

# Key bindings
export FZF_CTRL_T_OPTS="
  --preview 'bat --color=always --style=numbers --line-range=:500 {}' 2>/dev/null || cat {}
  --bind 'ctrl-/:change-preview-window(down|hidden|)'
"

export FZF_CTRL_R_OPTS="
  --preview 'echo {}'
  --preview-window down:3:hidden:wrap
  --bind 'ctrl-/:toggle-preview'
  --bind 'ctrl-y:execute-silent(echo -n {2..} | wl-copy)+abort'
  --color header:italic
  --header 'Press CTRL-Y to copy command into clipboard'
"

export FZF_ALT_C_OPTS="
  --preview 'ls -la {}'
  --preview-window right:50%
"